{% extends 'base.html.twig' %}

{% block title %}Votre panier
{% endblock %}

{% block body %}
	<style>
		.section__text-wrap {
			text-align: center;
		}
		.section__intro {
			position: relative;
		}
		.section__heading {
			font-weight: 600;
			letter-spacing: -0.02rem;
			font-size: 28px;
			position: relative;
		}
		.section__content {
			position: relative;
		}
		.table-responsive {
			overflow-x: auto;
		}
		.table-p {
			width: 100%;
			border: 1px solid #eee;
			border-collapse: collapse;
		}
		.table-p tr {
			position: relative;
			border-top: 1px solid #eee;
		}
		.table-p td {
			padding: 20px;
		}
		.table-p__box {
			display: -ms-flexbox;
			display: flex;
			-ms-flex-wrap: nowrap;
			flex-wrap: nowrap;
			-ms-flex-align: center;
			align-items: center;
		}
		.table-p__img-wrap {
			display: inline-block;
			vertical-align: middle;
			background-color: #f5f5f5;
			width: 120px;
			height: 120px;
		}
		.table-p__img-wrap img {
			display: block;
			min-width: 120px;
		}
		.table-p__info {
			margin-left: 18px;
		}
		.table-p__name {
			display: block;
		}
		.table-p__name > a {
			color: #333333;
			font-size: 14px;
			font-weight: 600;
			transition: color 0.5s;
		}
		.table-p__name > a:hover {
			color: #ff003b;
		}
		.table-p__category {
			display: block;
		}
		.table-p__category > a {
			color: #a0a0a0;
			transition: color 0.5s;
			font-size: 12px;
		}
		.table-p__category > a:hover {
			color: #ff003b;
		}
		.table-p__variant-list {
			margin: 0;
			padding: 0;
			list-style: none;
		}
		.table-p__variant-list > li > span {
			color: #a0a0a0;
			font-size: 12px;
		}
		.table-p__price {
			text-align: center;
			display: block;
			color: #333333;
			font-size: 14px;
			font-weight: 600;
		}
		.table-p__input-counter-wrap {
			text-align: center;
		}
		.table-p__del-wrap {
			text-align: center;
		}
		.table-p__delete-link {
			padding: 10px;
			font-size: 16px;
			display: inline-block;
			color: #333333;
			transition: color 0.5s;
		}
		.table-p__delete-link:hover {
			color: #ff003b;
		}
		@media(max-width: 767px) {
			.table-p td {
				min-width: 200px;
			}
			.w-r__container {
				-ms-flex-direction: column;
				flex-direction: column;
			}
			.w-r__wrap-1 {
				-ms-flex-direction: column;
				flex-direction: column;
			}
			.w-r__info {
				text-align: center;
				margin: 15px 0;
			}
			.w-r__wrap-2 {
				-ms-flex-align: center;
				align-items: center;
			}
		}
		.input-counter {
			position: relative;
			display: inline-block;
			max-width: 132px;
			min-width: 132px;
		}
		.input-counter__text {
			border-radius: 25px;
			display: block;
			width: 100%;
			height: 50px;
			font-size: 14px;
			font-weight: 600;
			text-align: center;
		}
		.empty {
			text-align: center;
		}
		.empty__big-text {
			display: block;
			margin-bottom: 12px;
			color: #ff003b;
			line-height: 1;
			font-size: 85px;
			font-weight: 600;
		}

		.empty__text-1 {
			display: block;
			font-size: 14px;
			font-weight: 700;
			margin-bottom: 12px;
			color: #333333;
		}
		.input-counter__text:focus {
			outline: 0;
		}
		.input-counter--text-primary-style {
			color: #333333;
			transition: all 0.6s linear;
			border: 2px solid transparent;
			background-color: #f1f1f1;
		}
		.input-counter--text-primary-style:focus {
			background-color: transparent;
			border-color: #ff003b;
		}
		.input-counter__minus,
		.input-counter__plus {
			top: 0;
			display: inline-block;
			font-size: 10px;
			cursor: pointer;
			position: absolute;
			width: 50px;
			line-height: 50px;
			height: 100%;
			text-align: center;
			color: #7f7f7f;
			transition: color 0.5s;
		}
		.input-counter__minus:hover,
		.input-counter__plus:hover {
			color: #333333;
		}
		.input-counter__minus {
			left: 0;
		}
		.input-counter__plus {
			right: 0;
		}

		.route-box {
			display: -ms-flexbox;
			display: flex;
			-ms-flex-align: center;
			align-items: center;
			-ms-flex-wrap: wrap;
			flex-wrap: wrap;
			background-color: #f1f1f1;
			-ms-flex-pack: justify;
			justify-content: space-between;
		}
		.route-box__g {
			-ms-flex: 0 1 auto;
		}
		.route-box__link {
			color: #333333;
			font-size: 13px;
			text-align: center;
			padding: 17px;
			font-weight: 600;
			display: inline-block;
			transition: color 0.5s;
		}
		.route-box__link:hover {
			color: #ff003b;
		}
		.route-box i {
			margin-right: 2px;
		}
		.u-c-secondary {
			color: #333333 !important;
		}
	</style>
	<div class="section__intro u-s-m-b-60">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<div class="section__text-wrap">
						<h1 class="section__heading u-c-secondary">SHOPPING CART</h1>
					</div>
				</div>
			</div>
		</div>
	</div>


	<!--====== Section Content ======-->
	<div class="section__content">
		<div class="container">
			<div class="row">
				<div class="col-lg-12 col-md-12 col-sm-12 u-s-m-b-30">
					<div class="table-responsive">
						{% if cartItems is not empty %}

							<table class="table-p">
								<thead>
									<tr>
										<th>Id</th>
										<th>Nom</th>
										<th>Quantit√©</th>
										<th>Prix</th>
										<th colspan="2">Action</th>
									</tr>
								</thead>
								<tbody>
									{% for cartItem in cartItems %}

										<!--====== Row ======-->
										<tr>
											<td>

												<span class="table-p__name">
													{{ cartItem.bookId }}
												</span>
											</td>
											<td>

												<span class="table-p__name">
													<a href="{{ path('livre_details', {'id': cartItem.bookId}) }}">{{ cartItem.bookName }}</a>
												</span>

											</td>
											<td>

												<span class="table-p__name">
													{{ cartItem.quantity }}
												</span>

											</td>
											<td>

												{{ cartItem.price }}
											</td>
											<td>
												<a href="{{ path('cart_increase', {'id': cartItem.bookId}) }}">
													<i class="fa-solid fa-plus"></i>
												</a>
												<p></p>
												<a href="{{ path('cart_decrease', {'id': cartItem.bookId}) }}">
													<i class="fa-solid fa-minus"></i>
												</a>
											</td>
											<td>


												<a class="far fa-trash-alt table-p__delete-link" href="{{ path('cart_remove', {'id': cartItem.bookId}) }}"></a>
											</td>
										</tr>
										<!--====== End - Row ======-->


									{% endfor %}
								</tbody>
							</tbody>
						</tbody>

						<tfoot>
							<tr>
								<td colspan="3" class="text-right">Total:</td>
								<td>
									{% set total = 0 %}
									{% for cartItem in cartItems %}
										{% set itemTotal = cartItem.price * cartItem.quantity %}
										{% set total = total + itemTotal %}
									{% endfor %}
									{{ total }}
								</td>
							</tr>
						</tfoot>
					</table>

					<div class="col-lg-12">
						<div class="route-box">
							<div class="route-box__g1">

								<a class="route-box__link" href="{{ path('app_livre') }}">
									<i class="fas fa-long-arrow-alt-left"></i>

									<span>CONTINUE SHOPPING</span>
								</a>
							</div>
							<div class="route-box__g2">

								<a class="route-box__link" href="{{ path('cart_clear') }}">
									<i class="fas fa-trash"></i>

									<span>CLEAR CART</span>
								</a>
							</div>
							<div class="route-box__g2">
								<form
									action="{{ path('cart_place_order') }}" method="POST">
									{#{{ csrf_token('place_order') }}#}
									<button type="submit" class="btn btn-primary">Passer la commande</button>
								</form>
							</div>
						</div>
					</div>
				{% else %}
					<div class="empty">
						<div class="empty__wrap">

							<span class="empty__big-text">EMPTY</span>

							<span class="empty__text-1">No items found on your cart.</span>

						</div>
					</div>
					<div class="col-lg-12">
						<div class="route-box">
							<div class="route-box__g1">

								<a class="route-box__link" href="{{ path('app_livre') }}">
									<i class="fas fa-long-arrow-alt-left"></i>

									<span>CONTINUE SHOPPING</span>
								</a>
							</div>
						</div>

					{% endif %}
				{% endblock %}
